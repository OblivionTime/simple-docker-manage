(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55e85008"],{3786:function(t,e,o){"use strict";o.d(e,"e",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"f",(function(){return i})),o.d(e,"a",(function(){return s})),o.d(e,"d",(function(){return l})),o.d(e,"b",(function(){return c}));var a=o("b775");function n(t){return Object(a["a"])({url:"/auth/auth",method:"post",data:t})}function r(){return Object(a["a"])({url:"/auth/info",method:"get"})}function i(){return Object(a["a"])({url:"/auth/list",method:"get"})}function s(t){return Object(a["a"])({url:"/auth/create",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/auth/update",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/auth/del",method:"post",data:t})}},5228:function(t,e,o){},a3c5:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"content"},[o("h1",[t._v("容器列表")]),o("el-button",{staticStyle:{margin:"20px 0"},attrs:{type:"primary"},on:{click:t.openCreateDialog}},[t._v("添加容器")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[o("el-table-column",{attrs:{prop:"host",label:"Host",align:"center"}}),o("el-table-column",{attrs:{prop:"port",label:"端口",align:"center"}}),o("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(o){return t.openUpdateDialog(e.row)}}}),o("el-button",{staticStyle:{"font-size":"20px",color:"red"},attrs:{type:"text",icon:"el-icon-delete-solid"},on:{click:function(o){return t.DeleteContainer(e.row.host)}}})]}}])}),o("el-table-column",{attrs:{label:"进入容器",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.openContainer(e.row)}}},[t._v("进入容器")])]}}])})],1)],1),o("el-dialog",{attrs:{title:t.title,visible:t.showDialog,width:"750px",height:"60%",center:"",top:"20px"},on:{"update:visible":function(e){t.showDialog=e}}},[o("el-form",{ref:"ruleForm",staticStyle:{padding:"20px 10px"},attrs:{model:t.formData,"label-position":"left"}},[o("el-form-item",{staticStyle:{"font-size":"18px"},attrs:{label:"主机号:","label-width":"140px",prop:"host",rules:[{required:!0,message:"主机号不能为空",trigger:"blur"}]}},[o("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"请输入主机号",disabled:"编辑容器"==t.title},model:{value:t.formData.host,callback:function(e){t.$set(t.formData,"host",e)},expression:"formData.host"}})],1),o("el-form-item",{staticStyle:{"font-size":"18px"},attrs:{label:"端口:","label-width":"140px",prop:"port",rules:[{required:!0,message:"端口不能为空",trigger:"blur"}]}},[o("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"请输入端口",oninput:"value=value.replace(/^\\.+|[^\\d]/g,'')"},model:{value:t.formData.port,callback:function(e){t.$set(t.formData,"port",e)},expression:"formData.port"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticStyle:{width:"140px"},nativeOn:{click:function(e){t.showDialog=!1}}},[t._v("取消")]),o("el-button",{staticStyle:{width:"140px"},attrs:{type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.title))])],1)],1)],1)},n=[],r=(o("e9c4"),o("d3b7"),o("3786")),i={data:function(){return{tableData:[],showDialog:!1,title:"添加容器",formData:{host:"",port:2375}}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;Object(r["f"])().then((function(e){t.tableData=e.data}))},openCreateDialog:function(){this.title="添加容器",this.showDialog=!0,this.formData={host:"",port:2375}},openUpdateDialog:function(t){this.title="编辑容器",this.showDialog=!0,this.formData=JSON.parse(JSON.stringify(t))},openContainer:function(t){var e=this,o={host:t.host,port:t.port},a=this.$loading({lock:!0,text:"尝试连接中....",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(r["e"])(o).then((function(o){if(0==o.code){var a=e.$router.resolve({path:"/home/index",query:{hostname:t.host}});window.open(a.href,"_blank")}else e.$message.error("连接失败")})).finally((function(){a.close()}))},submitForm:function(){var t=this;this.$refs["ruleForm"].validate((function(e){if(!e)return t.$message.warning("某些参数不能为空"),!1;"编辑容器"==t.title?Object(r["d"])(t.formData).then((function(e){0==e.code?(t.$message.success("修改成功!!!"),t.loadData(),t.showDialog=!1):t.$message.error(e.message)})):Object(r["a"])(t.formData).then((function(e){0==e.code?(t.$message.success("创建成功!!!"),t.loadData(),t.showDialog=!1):t.$message.error(e.message)}))}))},DeleteContainer:function(t){var e=this;this.$confirm("此操作将删除当前容器, 是否继续?","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["b"])({host:t}).then((function(t){0==t.code?(e.$message.success("删除成功"),e.loadData()):e.$message.error(t.message)}))}))}}},s=i,l=(o("b34f"),o("2877")),c=Object(l["a"])(s,a,n,!1,null,"62c4bef9",null);e["default"]=c.exports},b34f:function(t,e,o){"use strict";o("5228")},b775:function(t,e,o){"use strict";o("d3b7");var a=o("bc3a"),n=o.n(a),r=o("4360"),i=o("a18c"),s=o("5c96"),l="/api/docker/v1/",c=n.a.create({baseURL:l,timeout:5e4});c.interceptors.request.use((function(t){return r["a"].getters.hostname&&(t.headers["hostname"]=r["a"].getters.hostname),t}),(function(t){return Promise.reject(t)})),c.interceptors.response.use((function(t){if(401!=t.data.code)return t.data;Object(s["Message"])({message:t.data.message,type:"error",duration:1500,onClose:function(){setTimeout((function(){i["a"].push("/")}),1500)}})}),(function(t){console.log(t)})),e["a"]=c},e9c4:function(t,e,o){var a=o("23e7"),n=o("d066"),r=o("d039"),i=n("JSON","stringify"),s=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(t,e,o){var a=o.charAt(e-1),n=o.charAt(e+1);return l.test(t)&&!c.test(n)||c.test(t)&&!l.test(a)?"\\u"+t.charCodeAt(0).toString(16):t},f=r((function(){return'"\\udf06\\ud834"'!==i("\udf06\ud834")||'"\\udead"'!==i("\udead")}));i&&a({target:"JSON",stat:!0,forced:f},{stringify:function(t,e,o){var a=i.apply(null,arguments);return"string"==typeof a?a.replace(s,u):a}})}}]);